#
#   Admin - query , but this code only for caculate for each year. 
#   author - yunseok
#   date -  2018/06/07
annual=SELECT TO_CHAR(ORDER_DATE,'YYYY/MM/DD') O_DATE, SUM(PRICE) S_PRICE, COUNT(QUANTITY) O_COUNT,SUM(NVL2(SHIPPING_STATE,1000,0)) SP,SUM(QUANTITY) B_SUM FROM ORDER_TABLE JOIN ORDER_DETAIL USING(ORDER_UID) JOIN BANDI_BOOK USING(BOOK_UID) WHERE TO_CHAR(ORDER_DATE,'YYYY') = ? GROUP BY TO_CHAR(ORDER_DATE,'YYYY/MM/DD')
totalIncome=SELECT SUM(PRICE) BOOK_INCOME, SUM(NVL2(SHIPPING_STATE,1000,0)) PACKET_INCOME FROM ORDER_DETAIL JOIN BANDI_BOOK USING(BOOK_UID) JOIN ORDER_TABLE USING(ORDER_UID) WHERE TO_CHAR(ORDER_DATE, 'YYYY') = ?
bookstockCount=SELECT count(*) FROM BANDI_BOOK JOIN WRITER USING(WRITER_CODE) WHERE BOOK_QUANTITY < ?
orderCount=SELECT COUNT(*) ORDER_COUNT FROM(SELECT TO_CHAR(ORDER_UID) FROM ORDER_TABLE JOIN ORDER_DETAIL USING(ORDER_UID) WHERE TO_CHAR(ORDER_DATE, 'YYYY') = ? GROUP BY TO_CHAR(ORDER_UID))
commentCount=SELECT COUNT(*) FROM BANDI_COMMENT JOIN BANDI_BOOK USING(BOOK_UID) JOIN BANDI_USER USING(USER_UID) WHERE TO_CHAR(WRITED_DATE, 'YYYY') = ?

commentAll=SELECT COMMENT_UID ,TITLE, E_MAIL ,BOOK_COMMENT, TO_CHAR(WRITED_DATE,'YYYY/MM/DD') FROM BANDI_COMMENT JOIN BANDI_BOOK USING(BOOK_UID) JOIN BANDI_USER USING(USER_UID) WHERE TO_CHAR(WRITED_DATE, 'YYYY') = ?
bookstockTable=SELECT BOOK_UID, ISBN, TITLE, WRITER_NAME,BOOK_QUANTITY FROM BANDI_BOOK JOIN WRITER USING(WRITER_CODE) WHERE BOOK_QUANTITY < ?
orderTable=SELECT ORDER_UID, E_MAIL, NAME, PHONE, TO_CHAR(ORDER_DATE,'YYYY/MM/DD') ORDER_DATE FROM ORDER_TABLE JOIN BANDI_USER USING(USER_UID) WHERE TO_CHAR(ORDER_DATE,'YYYY') = ?
genreCount=SELECT GENRE, COUNT(*) GENRE_COUNT FROM ORDER_DETAIL JOIN BANDI_BOOK USING(BOOK_UID) JOIN GENRE USING(GENRE_CODE) JOIN ORDER_TABLE USING(ORDER_UID) WHERE TO_CHAR(ORDER_DATE,'YYYY') = ? GROUP BY GENRE